<!doctype html><html lang="fr"><head>
<meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>FRANCE — Reset mot de passe</title><link rel="stylesheet" href="/styles.css"/></head>
<body><header data-nav></header>
<main class="container">
<section class="hero"><h1 class="h-title">Réinitialiser le mot de passe</h1><p class="h-sub">Lien valable 1h (prototype). Après validation : connexion automatique.</p></section>
<section class="card">
  <div class="row">
    <div><label class="muted">Email</label><input id="email" class="input"/></div>
    <div><label class="muted">Token</label><input id="token" class="input"/></div>
  </div>
  <div style="margin-top:12px;"><label class="muted">Nouveau mot de passe</label><input id="password" type="password" class="input"/></div>
  <button id="btn" class="btn" style="margin-top:12px;">Valider</button>
  <div id="a" class="alert"></div>
</section></main>
<footer data-footer></footer>
<script src="/app.js"></script><script src="/auth.js"></script>
<script>
const { api, setAlert } = window.FRANCE_AUTH;
const p = new URLSearchParams(location.search);
email.value = p.get("email") || "";
token.value = p.get("token") || "";
btn.onclick = async () => {
  const el = document.getElementById("a");
  try{
    await api("/api/reset", { email: email.value, token: token.value, password: password.value });
    setAlert(el, "Mot de passe changé. Connexion…", "ok");
    setTimeout(()=> location.href="/client.html", 700);
  }catch(e){ setAlert(el, e.message, "err"); }
};
</script></body></html>